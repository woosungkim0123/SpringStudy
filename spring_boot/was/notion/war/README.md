# WAR

## JAR vs WAR

### JAR (Java Archive)

- JAR는 자바 클래스와 관련 리소스를 압축한 단순한 압축 파일입니다.
- JVM 위에서 실행되거나 다른 곳에서 사용하는 라이브러리로 제공됩니다.
- 직접 실행하는 경우 main() 메서드가 필요하고, MANIFEST.MF 파일에 실행할 메인 메서드가 있는 클래스를 지정해야 합니다.
- `java -jar test.jar`

### WAR (Web Application Archive)

- 웹 애플리케이션 서버(WAS)에 배포할 때 사용하는 파일입니다.
- 웹 서버 또는 애플리케이션 서버 내부의 JVM을 통해 간접적으로 실행됩니다.
- JAR 파일이 JVM을 통해 직접 실행되는 반면, WAR 파일은 웹 서버 또는 WAS에 의해 관리되고 실행됩니다.
- WAR 구조를 지켜야하며 HTML과 같은 정적 리소스와 클래스 파일을 모두 포함하기 때문에 복잡합니다.

<br>

## WAR 구조

- WEB-INF 폴더 안에는 자바 클래스, 라이브러리, 설정 정보가 포함됩니다.
- WEB-INF를 제외한 나머지 영역에는 HTML, CSS 같은 정적 리소스가 위치합니다.

```
WAS/
├── WEB-INF/
│   ├── classes/
│   │   └── (여기에 실행 가능한 클래스 파일들이 위치합니다.)
│   ├── lib/
│   │   └── (외부 라이브러리 JAR 파일들이 위치합니다.)
│   └── web.xml (웹 애플리케이션의 배치 설명자 파일)
└── index.html (웹 애플리케이션의 루트에 위치하는 정적 리소스)
```

<br>

## WAR 빌드, 배포

### 빌드

1. `./gradlew build` 명령어 사용시 `build/libs` 디렉토리에 `*.war` 파일이 생성됩니다. (현재 프로젝트는 모듈로 사용되어 루트에서 실행해야 합니다.)
2. 빌드한 파일의 압축을 풀어서 내용을 확인하면 `WEB-INF` 폴더와 `META-INF` 폴더가 포함되어 있는 것을 확인할 수 있습니다.

### 배포

1. Tomcat(WAS) 사용시 webapps 디렉토리에 war 파일을 복사하고 ROOT.war로 이름을 변경합니다.
2. Tomcat을 실행하면 ROOT.war 파일이 압축이 풀리고 웹 애플리케이션이 실행됩니다.
